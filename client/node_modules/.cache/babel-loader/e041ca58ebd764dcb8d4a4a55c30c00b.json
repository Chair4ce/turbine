{"ast":null,"code":"import { all, call, fork, put, takeEvery } from 'redux-saga/effects';\nimport { SquadronActionTypes } from './types';\nimport { squadronSaveSuccess, squadronsFetchError, squadronsFetchSuccess } from './actions';\nimport { callApi } from '../../utils/api';\nconst API_ENDPOINT = 'https://turbine.dev.dev.east.paas.geointservices.io/';\n\nfunction* handleFetch() {\n  try {\n    // To call async functions, use redux-saga's `call()`.\n    const res = yield call(callApi, 'get', 'api/squadrons');\n\n    if (res.error) {\n      yield put(squadronsFetchError(res.error));\n    } else {\n      yield put(squadronsFetchSuccess(res));\n    }\n  } catch (err) {\n    if (err instanceof Error && err.stack) {\n      yield put(squadronsFetchError(err.stack));\n    } else {\n      yield put(squadronsFetchError('An unknown error occured.'));\n    }\n  }\n}\n\nfunction* handlePost() {\n  try {\n    // To call async functions, use redux-saga's `call()`.\n    const res = yield call(callApi, 'post', 'api/squadrons/add', data);\n\n    if (res.error) {\n      yield put(squadronsFetchError(res.error));\n    } else {\n      yield put(squadronSaveSuccess());\n    }\n  } catch (err) {\n    if (err instanceof Error && err.stack) {\n      yield put(squadronsFetchError(err.stack));\n    } else {\n      yield put(squadronsFetchError('An unknown error occured.'));\n    }\n  }\n} // This is our watcher function. We use `take*()` functions to watch Redux for a specific action\n// type, and run our saga, for example the `handleFetch()` saga above.\n\n\nfunction* watchFetchRequest() {\n  yield takeEvery(SquadronActionTypes.FETCH_REQUEST, handleFetch);\n  yield takeEvery(SquadronActionTypes.SAVE_SQUADRON, handleFetch);\n} // We can also use `fork()` here to split our saga into multiple watchers.\n\n\nfunction* squadronSaga() {\n  yield all([fork(watchFetchRequest)]);\n}\n\nexport default squadronSaga;","map":{"version":3,"sources":["/Users/chairforce/workspace/turbine/client/src/store/squadrons/sagas.ts"],"names":["all","call","fork","put","takeEvery","SquadronActionTypes","squadronSaveSuccess","squadronsFetchError","squadronsFetchSuccess","callApi","API_ENDPOINT","handleFetch","res","error","err","Error","stack","handlePost","data","watchFetchRequest","FETCH_REQUEST","SAVE_SQUADRON","squadronSaga"],"mappings":"AAAA,SAASA,GAAT,EAAcC,IAAd,EAAoBC,IAApB,EAA0BC,GAA1B,EAA+BC,SAA/B,QAAgD,oBAAhD;AACA,SAASC,mBAAT,QAAoC,SAApC;AACA,SAAQC,mBAAR,EAA6BC,mBAA7B,EAAkDC,qBAAlD,QAA8E,WAA9E;AACA,SAASC,OAAT,QAAwB,iBAAxB;AAGA,MAAMC,YAAY,GAAG,sDAArB;;AAEA,UAAUC,WAAV,GAAwB;AACpB,MAAI;AACA;AACA,UAAMC,GAAG,GAAG,MAAMX,IAAI,CAACQ,OAAD,EAAU,KAAV,EAAiB,eAAjB,CAAtB;;AAEA,QAAIG,GAAG,CAACC,KAAR,EAAe;AACX,YAAMV,GAAG,CAACI,mBAAmB,CAACK,GAAG,CAACC,KAAL,CAApB,CAAT;AACH,KAFD,MAEO;AACH,YAAMV,GAAG,CAACK,qBAAqB,CAACI,GAAD,CAAtB,CAAT;AACH;AACJ,GATD,CASE,OAAOE,GAAP,EAAY;AACV,QAAIA,GAAG,YAAYC,KAAf,IAAwBD,GAAG,CAACE,KAAhC,EAAuC;AACnC,YAAMb,GAAG,CAACI,mBAAmB,CAACO,GAAG,CAACE,KAAL,CAApB,CAAT;AACH,KAFD,MAEO;AACH,YAAMb,GAAG,CAACI,mBAAmB,CAAC,2BAAD,CAApB,CAAT;AACH;AACJ;AACJ;;AAED,UAAUU,UAAV,GAAuB;AACnB,MAAI;AACA;AACA,UAAML,GAAG,GAAG,MAAMX,IAAI,CAACQ,OAAD,EAAU,MAAV,EAAkB,mBAAlB,EAAuCS,IAAvC,CAAtB;;AAEA,QAAIN,GAAG,CAACC,KAAR,EAAe;AACX,YAAMV,GAAG,CAACI,mBAAmB,CAACK,GAAG,CAACC,KAAL,CAApB,CAAT;AACH,KAFD,MAEO;AACH,YAAMV,GAAG,CAACG,mBAAmB,EAApB,CAAT;AACH;AACJ,GATD,CASE,OAAOQ,GAAP,EAAY;AACV,QAAIA,GAAG,YAAYC,KAAf,IAAwBD,GAAG,CAACE,KAAhC,EAAuC;AACnC,YAAMb,GAAG,CAACI,mBAAmB,CAACO,GAAG,CAACE,KAAL,CAApB,CAAT;AACH,KAFD,MAEO;AACH,YAAMb,GAAG,CAACI,mBAAmB,CAAC,2BAAD,CAApB,CAAT;AACH;AACJ;AACJ,C,CAED;AACA;;;AACA,UAAUY,iBAAV,GAA8B;AAC1B,QAAMf,SAAS,CAACC,mBAAmB,CAACe,aAArB,EAAoCT,WAApC,CAAf;AACA,QAAMP,SAAS,CAACC,mBAAmB,CAACgB,aAArB,EAAoCV,WAApC,CAAf;AACH,C,CAED;;;AACA,UAAUW,YAAV,GAAyB;AACrB,QAAMtB,GAAG,CAAC,CAACE,IAAI,CAACiB,iBAAD,CAAL,CAAD,CAAT;AACH;;AAED,eAAeG,YAAf","sourcesContent":["import { all, call, fork, put, takeEvery } from 'redux-saga/effects';\nimport { SquadronActionTypes } from './types';\nimport {squadronSaveSuccess, squadronsFetchError, squadronsFetchSuccess} from './actions';\nimport { callApi } from '../../utils/api';\nimport SquadronModel from \"./SquadronModel\";\n\nconst API_ENDPOINT = 'https://turbine.dev.dev.east.paas.geointservices.io/';\n\nfunction *handleFetch() {\n    try {\n        // To call async functions, use redux-saga's `call()`.\n        const res = yield call(callApi, 'get', 'api/squadrons');\n\n        if (res.error) {\n            yield put(squadronsFetchError(res.error));\n        } else {\n            yield put(squadronsFetchSuccess(res));\n        }\n    } catch (err) {\n        if (err instanceof Error && err.stack) {\n            yield put(squadronsFetchError(err.stack));\n        } else {\n            yield put(squadronsFetchError('An unknown error occured.'));\n        }\n    }\n}\n\nfunction *handlePost() {\n    try {\n        // To call async functions, use redux-saga's `call()`.\n        const res = yield call(callApi, 'post', 'api/squadrons/add', data);\n\n        if (res.error) {\n            yield put(squadronsFetchError(res.error));\n        } else {\n            yield put(squadronSaveSuccess());\n        }\n    } catch (err) {\n        if (err instanceof Error && err.stack) {\n            yield put(squadronsFetchError(err.stack));\n        } else {\n            yield put(squadronsFetchError('An unknown error occured.'));\n        }\n    }\n}\n\n// This is our watcher function. We use `take*()` functions to watch Redux for a specific action\n// type, and run our saga, for example the `handleFetch()` saga above.\nfunction *watchFetchRequest() {\n    yield takeEvery(SquadronActionTypes.FETCH_REQUEST, handleFetch);\n    yield takeEvery(SquadronActionTypes.SAVE_SQUADRON, handleFetch);\n}\n\n// We can also use `fork()` here to split our saga into multiple watchers.\nfunction *squadronSaga() {\n    yield all([fork(watchFetchRequest)]);\n}\n\nexport default squadronSaga;"]},"metadata":{},"sourceType":"module"}